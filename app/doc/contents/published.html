<div ng-controller="doc_ctrl_published" ng-init="loadReciepients(doc_user[currentItem.agency.id],currentItem.agency.id);init_publishing_receipients();">
    
    <div ng-include="'./app/doc/contents/document.html'"></div>
    
    <hr>
    <h4>Files</h4>
    <ol>
        <li ng-repeat="x in currentItem.files">
            <a ng-href="{{api_address + '/uploads/' + x.path}}" download="{{x.name}}">
                {{x.name}}
            </a>
        </li>
    </ol>

    <hr>

    <div layout-gt-sm layout-sm="column">
        <md-button class="md-button bg-red col-white" ng-click="backToDraft(currentItem, $event)" layout-gt-sm>
            <i class="fa fa-undo m-r-5"></i>
            Back to Draft
        </md-button>
        <md-button class="md-button md-primary" ng-click="openSendDocument(currentItem, $event)" layout-gt-sm>
            <i class="fa fa-paper-plane m-r-5"></i>
            Send
        </md-button>
    </div>

    <div ng-if="currentReciepients.length > 0">
        <hr>
        <h4>Receipients</h4>
        <ol>
            <li ng-repeat="x in currentReciepients">
                <strong class="col-grey">{{x.name}}</strong>
                <br>
                <ul>
                    <li ng-repeat="x in x.sentItems">
                        {{x.date}} : 
                        <strong ng-class="{ 'col-green' : (x.status == 'received'), 'col-orange' : (x.status == 'declined'), 'col-red' : (x.status == 'pending') }">
                                {{x.status}}
                        </strong> ,
                        <cite>{{x.remarks}}</cite>
                    </li>
                </ul>
            </li>
        </ol>
    </div>
    

    <br>
    <hr>
    <div ng-controller="doc_ctrl_actions" ng-include="'./app/doc/contents/actions.html'"></div>
    <hr>
    <h4></h4>
    <br><br><br>

</div>